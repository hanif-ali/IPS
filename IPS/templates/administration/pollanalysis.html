{% extends 'administration/base.html' %}
{% load static %}

{% block addcss %}
<link href="{% static 'administraion/vendor/datatables-plugins/dataTables.bootstrap.css' %}" rel="stylesheet">
<link href="{% static 'administraion/vendor/datatables-responsive/dataTables.responsive.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}


  <div class="row">
    <div class="col-lg-12 grid-margin stretch-card">
      <div class="card bg-secondary">
		<div class="card-header pt-4">
		      <h4>Poll Analysis for <b>{{poll.grade.name}} - {{poll.house.name}} {{poll.category}}</b></h4>
		</div>
		<div class="card-body">
			<div class="row">
				<div class="col-lg-6">
					<div class="table-responsive h-100">
						<table class="table table-dark table-hover table-bordered h-100">
							<thead>
								<tr>
									<td>ID</td>
									<td>Name</td>
									<td>Votes</td>
								</tr>
							</thead>
							<tbody>
								{% for candidate_data in candidates_votes.items %}
								<tr>
									<td>{{candidate_data.0.student.user.username}}</td>
									<td>{{candidate_data.0.student.name}}</td>
									<td>{{candidate_data.1}}</td>
								</tr>
								{% endfor %}

							</tbody>
						</table>
					</div>
				
				</div>

				<div class="col-lg-6">
					<div class="card">
						<div class="card-body">
							<canvas id="doughnutChart" style="height:230px"></canvas>
						</div>
					</div>

				</div>
			</div>
		</div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-12 grid-margin stretch-card">
      <div class="card bg-light">
		<div class="card-header pt-4">
		      <h4>VOTERS INFORMATION</b></h4>
		</div>
		<div class="card-body">
			<div class="row">
				<div class="col-lg-12 border py-4 my-1 ">
					<div class="card bg-secondary">
						<div class="card-header"><b>VOTED</b></div>
						<div class="card-body">
						<div class="table-responsive">
							<table class="table table-light table-striped table-bordered" id="dataTable1">
								<thead>
									<tr>
										<td>ID</td>
										<td>Name</td>
										<td>Grade</td>
									</tr>
								</thead>
								<tbody>
									{% for voter in poll.voted.all %}
									<tr>
										<td>{{voter.user.username}}</td>
										<td>{{voter.name}}</td>
										<td>{{voter.grade.name}}</td>
									</tr>
									{% endfor %}

								</tbody>
							</table>
						</div>
						</div>
					</div>
					
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12 border py-4 my-1 ">
					<div class="card bg-secondary">
						<div class="card-header"><b>YET TO VOTE</b></div>
						<div class="card-body">
						<div class="table-responsive">
						<table class="table table-light table-striped table-bordered" id="dataTable2">
							<thead>
								<tr>
									<td>ID</td>
									<td>Name</td>
									<td>Grade</td>
								</tr>
							</thead>
							<tbody>
								{% for voter in yet_to_vote %}
								<tr>
									<td>{{voter.user.username}}</td>
									<td>{{voter.name}}</td>
									<td>{{voter.grade.name}}</td>
								</tr>
								{% endfor %}

							</tbody>
						</table>
						</div>
						</div>
					</div>
					
				</div>
			</div>

		</div>
      </div>
    </div>
  </div>



{% endblock %}


{% block addscript %}
{% include 'administration/chart2.html' %}
<script src="{% static 'administration/vendor/datatables/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'administration/vendor/datatables-plugins/dataTables.bootstrap.min.js' %}"></script>
<script src="{% static 'administration/vendor/datatables-responsive/dataTables.responsive.js' %}"></script>

<script>
    $(document).ready(function() {
        $('#dataTable1').DataTable({
            responsive: true
        });
    });
    $(document).ready(function() {
        $('#dataTable2').DataTable({
            responsive: true
        });
    });
</script>

{% endblock %}

